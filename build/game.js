// Generated by CoffeeScript 1.10.0
(function() {
  window.DEGREES_TO_RADIANS = 0.0174533;

  window.timeout = function(time, method) {
    return setTimeout(method, time);
  };

  this.Game = (function() {
    function Game() {
      this.models = window.models;
      this.base = new Base();
      this.menu = new Menu(this);
      this.controller = new Controller(this);
      this.base.setCameraPosition(0, -300, 0);
      this.base.setCameraLook(0, 0, 0);
      this.base.spotlight.intensity = 0.15;
      this.base.setLightPosition(0, -200, 0);
      this.base.setLightLook(0, 0, 0);
    }

    Game.prototype.start = function() {
      this.menu.hide();
      this.base.spotlight.intensity = 0.2;
      this.base.setLightPosition(LIGHT_POSITION.x, LIGHT_POSITION.y, LIGHT_POSITION.z);
      this.level = new Level(this);
      this.player = new Player(this);
      return this.base.follow(this.player);
    };

    Game.prototype.render = function() {
      if (this.player) {
        this.player.update();
        this.checkWin();
      }
      this.controller.update();
      return this.base.render();
    };

    Game.prototype.checkWin = function() {
      if (this.player.getPosition().y >= this.level.currentLength()) {
        if (this.level.hasNextLevel()) {
          this.level.nextLevel();
          return this.player.reset();
        } else {
          return console.log('Win!');
        }
      }
    };

    Game.prototype.reset = function() {
      return this.player.reset();
    };

    Game.prototype.addToScene = function(object) {
      return this.base.addToScene(object);
    };

    Game.prototype.removeFromScene = function(object) {
      return this.base.removeFromScene(object);
    };

    Game.prototype.jump = function() {
      return this.player.jump();
    };

    Game.prototype.slide = function() {
      return this.player.startSlide();
    };

    Game.prototype.left = function() {
      return this.player.startLeft();
    };

    Game.prototype.right = function() {
      return this.player.startRight();
    };

    return Game;

  })();

}).call(this);
